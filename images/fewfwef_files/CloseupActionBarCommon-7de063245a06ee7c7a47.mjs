(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["CloseupActionBarCommon"],{"3vRR":function(e,t,n){var o=n("q1tI"),i=n("n6mq");t.a=({children:e})=>o.createElement(i.c,{width:"100%",role:"list"},e)},Hrat:function(e,t,n){var o=n("xdpg"),i=n("Ye/N");t.a=e=>{const t=e.link_domain,n=e.tracked_link||e.link||e.images&&e.images.orig&&e.images.orig.url,a=e.rich_metadata,r=e.domain;let s=e.pinner||e.origin_pinner;t&&(s=t.official_user||s);const l=!(!(a&&a.recipe&&a.recipe.name&&a.recipe.categorized_ingredients)||a.recipe.from_aggregated_data);let c,d;a&&a.products&&a.products[0]&&(c=!!(a&&a.name&&a.offer_summary));const u=e.buyable_product,m=c||u,p=!(!a||!a.article),h=!(!a||!a.tutorial),f=!(!s||!s.username);let g=i.a._("Saved from ","Closeup pin annotation","Closeup pin annotation"),y=f?i.a._("Saved by"):i.a._("Saved from"),b=i.a._("Visit");a&&a.products&&a.products[0]&&a&&a.products[0].name&&a.products[0].offer_summary&&(g=i.a._("Product sold by ","pin annotation","pin annotation"),d=a.products[0].offer_summary),m?(y=i.a._("Sold by"),b=i.a._("Visit")):h?(g=i.a._("Saved from ","pin annotation","pin annotation"),y=f?i.a._("Saved by"):i.a._("Saved from"),b=i.a._("Visit")):l?(g=i.a._("Recipe from ","pin annotation","pin annotation"),y=f?i.a._("Recipe by"):i.a._("Recipe from"),b=i.a._("Make it")):p&&(g=i.a._("Article from ","pin annotation","pin annotation"),y=f?i.a._("Article by"):i.a._("Article from"),b=i.a._("Read it"));const E=e.rich_summary;if(!d&&E){let e;E&&E.products&&E.products[0]&&(e=!!(E&&E.products[0].name&&E.products[0].offer_summary))&&(g=i.a._("Product sold by ","pin annotation","pin annotation"))}let _,S;return f?(_="/"+s.username+"/",S=s.full_name):(_="/source/"+r,S=a&&a.site_name||r),{actionButtonText:b,image:s&&(s.image_medium_url||s.image_small_url)||e.board&&e.board.image_thumbnail_url,link:_,pinLink:n,pin:e,pinCreditPrefix:g,prefixText:y,subtitle:S,title:o.c(i.a._("More from {{ subtitle }}"),{subtitle:S}),pinTitle:e.closeup_unified_title,pinDescription:e.closeup_unified_description,pinCategory:e.category}}},LeWa:function(e,t,n){n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r}));n("q1tI");var o=n("QkVN"),i=n.n(o);const a={text:"",srcUrl:"",canonicalUrl:"",imageSignature:"",imageUrl:"",isFetching:!1},r={backgroundColor:"#ffffff",blockIds:[],canvasJson:null,coverImgSignature:"",description:"",descriptionError:null,dominantColors:[],layout:null,linkBlock:a,linkError:null,media:null,selectedBlockId:null,signals:{},title:"",titleError:null};t.a=(e=r,t)=>{switch(t.type){case"PIN_DRAFT_ADD_STORY_PIN_ITEM":case"STORY_PIN_ITEM_UPDATE_DATA":{const{pinItem:n}=t.payload;return{...e,...n}}case"STORY_PIN_ITEM_SET_DESCRIPTION":{const{description:n}=t.payload;return{...e,description:n}}case"STORY_PIN_ITEM_SET_DESCRIPTION_ERROR":{const{descriptionError:n}=t.payload;return{...e,descriptionError:n}}case"STORY_PIN_ITEM_UPDATE_LINK_BLOCK":{const{linkBlock:n}=t.payload;return{...e,linkBlock:{...e.linkBlock,...n}}}case"STORY_PIN_ITEM_SET_LINK_ERROR":{const{linkError:n}=t.payload;return{...e,linkError:n}}case"STORY_PIN_ITEM_SET_MEDIA":{const{media:n}=t.payload;return{...e,media:n,canvasJson:null}}case"STORY_PIN_ITEM_UPDATE_MEDIA":{const{media:n}=t.payload;return{...e,media:e.media?i()({},e.media,n):null}}case"STORY_PIN_ITEM_SET_TITLE":{const{title:n}=t.payload;return{...e,title:n}}case"STORY_PIN_ITEM_SET_TITLE_ERROR":{const{titleError:n}=t.payload;return{...e,titleError:n}}case"STORY_PIN_ITEM_SET_EDITED_IMAGE":{const{editedMedia:n,canvasJson:o}=t.payload;return{...e,media:n,canvasJson:o}}case"STORY_PIN_ITEM_SET_SELECTED_BLOCK_ID":{const{blockId:n}=t.payload;return{...e,selectedBlockId:n}}case"STORY_PIN_ITEM_SET_BACKGROUND_COLOR":{const{backgroundColor:n}=t.payload;return{...e,backgroundColor:n}}case"STORY_PIN_ITEM_SET_COVER_IMAGE_SIGNATURE":{const{coverImgSignature:n}=t.payload;return{...e,coverImgSignature:n}}case"STORY_PIN_ITEM_SET_LAYOUT":{const{layout:n}=t.payload;return{...e,layout:n}}case"STORY_PIN_ITEM_SET_DOMINANT_COLORS":{const{dominantColors:n}=t.payload;return{...e,dominantColors:n}}case"STORY_PIN_ITEM_ADD_BLOCK":{const{blockId:n}=t.payload,{blockIds:o}=e;return{...e,blockIds:[...o,n]}}case"STORY_PIN_ITEM_REMOVE_BLOCK":{const{blockId:n}=t.payload,{blockIds:o}=e;return{...e,blockIds:[...o.filter(e=>e!==n)]}}default:return e}}},Pus6:function(e,t,n){var o=n("q1tI"),i=n("R6wO"),a=n("3gA6"),r=n("n6mq");t.a=({bold:e,description:t,descriptionColor:n,external:s,hasDividerAfter:l,icon:c,onClick:d,text:u,url:m})=>{const p=o.createElement(r.c,{role:"listitem",overflow:"hidden"},o.createElement(i.a,{bold:e,description:t,descriptionColor:n,icon:c,text:u}));return o.createElement(r.c,null,m?o.createElement(a.b,{to:m,external:s,onClick:d},p):o.createElement(r.P,{onTouch:d,fullWidth:!1},p),l&&o.createElement(r.j,null))}},dtqy:function(e,t,n){var o=n("q1tI"),i=n.n(o),a=n("/MKj"),r=n("qWlA"),s=n("5S2N"),l=n("fArA"),c=n("U4JR");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(l.compose)(Object(a.connect)(({pins:e},{pinId:t,carouselSlotCurrentIndex:n})=>{const{carousel_data:o}=e&&t&&e[t]||{},{index:i}=o||{};return void 0!==n?{carouselSlotCurrentIndex:i||n||0}:{}}),(function(e){return class extends o.PureComponent{constructor(...e){super(...e),d(this,"state",{showEditModal:!1}),d(this,"onHide",()=>{this.setState({showEditModal:!1}),this.props.onToggleModal&&this.props.onToggleModal(!1)}),d(this,"handlePinEditButtonClick",Object(r.a)(e=>{e&&e.stopPropagation();const{component:t,onToggleModal:n}=this.props;n&&n(!0),Object(c.a)(101,{element:3,...t?{component:t}:{}}),this.setState({showEditModal:!0})}))}render(){const{pinId:t,onDelete:n,onSubmit:a,carouselSlotCurrentIndex:r}=this.props,{showEditModal:l}=this.state,c={...this.props,handlePinEditButtonClick:this.handlePinEditButtonClick};return i.a.createElement(o.Fragment,null,i.a.createElement(e,c),l&&i.a.createElement(s.a,{carouselSlotCurrentIndex:r,onDelete:n,onHide:this.onHide,onSubmit:a,pinId:t}))}}}))},qlIy:function(e,t,n){n.r(t);var o=n("q1tI"),i=n.n(o),a=n("Ye/N"),r=n("vepm"),s=n("4cpq"),l=n("dtqy");var c=Object(l.a)(({handlePinEditButtonClick:e})=>i.a.createElement(s.a,{id:"closeup-pin-edit-button"},i.a.createElement(r.a,{accessibilityLabel:a.a._("Edit","edit button on pin","edit button on pin"),onClick:t=>e&&e(t),icon:"edit"}))),d=n("JW66"),u=n("ENn1"),m=n("ynlw"),p=n("Hrat"),h=n("/MKj"),f=n("E/VT"),g=n("7w6Q"),y=n("tkfL");const b=()=>g.a.increment("windows.download.blob.error"),E=(e,t,n)=>{const o=new window.Windows.Storage.Pickers.FileSavePicker;o.suggestedStartLocation=window.Windows.Storage.Pickers.PickerLocationId.picturesLibrary;const{extension:i,extensionName:r,name:s}=(e=>{const t=e.split("/"),n=t[t.length-1],o=n.split(".");if(o.length>1){const e=o.pop();return{extension:`.${e}`,extensionName:e.toUpperCase(),name:o.join()}}return{extension:".",extensionName:a.a._("Unknown","Label for file picker drop down when the file type is not known","Label for file picker drop down when the file type is not known"),name:n}})(t);o.suggestedFileName=n||s,o.fileTypeChoices.insert(r,[i]),o.pickSaveFileAsync().then(t=>{t&&(window.Windows.Storage.CachedFileManager.deferUpdates(t),t.openAsync(window.Windows.Storage.FileAccessMode.readWrite).then(t=>{const n=e.msDetachStream();window.Windows.Storage.Streams.RandomAccessStream.copyAsync(n,t).then(()=>{t.flushAsync().done(()=>{n.close(),t.close(),g.a.increment("windows.download.blob.success")},b)},b)},b))})};var _=({filename:e,imgSrc:t,category:n})=>{if(!t)return null;return o.createElement(y.b,{onClick:()=>{((e,t)=>{try{const n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onreadystatechange=()=>{if(4===n.readyState)if(200!==n.status)g.a.increment("windows.download.blob.nodownload",.1,{status:n.status});else{const o=n.response;E(o,e,t)}},n.send(null)}catch(n){g.a.increment("windows.download.blob.xhrexception",.1,{error:n})}})(t,e)},text:a.a._("Download image","Button to download Pin image","Button to download Pin image")})},S=n("lUXN"),w=n("TiQD"),T=n("kmwA"),I=n("n6mq");function R(e){const{onDismiss:t,myPin:n}=e,[r,s]=Object(o.useState)(1),l=[{label:a.a._("Small","pinActionDropdown.GetEmbedCodeModal.small","Label on segmented controller for pin embed code, for small width"),width:236},{label:a.a._("Medium","pinActionDropdown.GetEmbedCodeModal.medium","Label on segmented controller for pin embed code, for medium width"),width:345},{label:a.a._("Large","pinActionDropdown.GetEmbedCodeModal.large","Label on segmented controller for pin embed code, for large width"),width:450},{label:a.a._("Extra Large","pinActionDropdown.GetEmbedCodeModal.extra_large","Label on segmented controller for pin embed code, for extra-large width"),width:600}];return i.a.createElement(I.r,null,i.a.createElement(w.b,{accessibilityModalLabel:a.a._("Get Embed Code","pinActionDropdown.GetEmbedCodeModal.modalLabel","Accessibility label on modal for pin embed code"),heading:a.a._("Get Embed Code","pinActionDropdown.GetEmbedCodeModal.header","Heading on modal for pin embed code"),onDismiss:t,footer:i.a.createElement(I.c,{display:"flex",direction:"row",justifyContent:"end"},i.a.createElement(I.d,{size:"sm",text:a.a._("Got it!","pinActionDropdown.GetEmbedCodeModal.dismissButton","Button to dismiss embed code modal"),onClick:t}))},i.a.createElement(I.c,{paddingX:6,paddingY:4},i.a.createElement(I.E,{items:l.map(e=>e.label),selectedItemIndex:r,onChange:({activeIndex:e})=>{s(e)}})),i.a.createElement(I.c,{paddingX:8,paddingY:6},i.a.createElement("code",null,`<iframe src="${T.a.settings.ASSETS_SITE_URL}/ext/embed.html?id=${n.id}" height="${Math.ceil(n.height*l[r].width/n.width+100)}" width="${l[r].width}" frameborder="0" scrolling="no" ></iframe>`))))}var C=n("hFNL"),O=n("LT60"),v=n("fArA"),x=n("eUcp"),k=n("U4JR"),P=n("pLLR"),B=n("+PUW");var M=Object(v.compose)(Object(h.connect)(B.d,B.c),P.f)((function({bestPinImgSrc:e,bgColor:t,embedImg:n,hideDownload:s,showEmbed:l,iconColor:c,iconSize:d,isFullAuth:u,onToggle:m,openLoginModal:p,pinCategory:h,pinDescription:g,pinId:b,pinImgSrc:E,pinTitle:w,reportPin:T,requestContext:v,usePortal:P}){const[B,M]=Object(o.useState)(!1),[j,D]=Object(o.useState)(!1),A=Object(o.useRef)(),L=()=>{M(!1)},N=()=>{M(!1),D(!j)},H=a.a._("More options","Accessible label for more options dropdown","Accessible label for more options dropdown");return i.a.createElement(I.c,{flex:"grow",alignItems:"center",display:"flex"},i.a.createElement(I.c,{ref:A},i.a.createElement(r.a,{accessibilityLabel:H,icon:"ellipsis",onClick:()=>{m&&m(),M(!B),(e=>{Object(k.a)(101,{element:e,component:4,view:3,viewParameter:139})})(981)}})),B&&(()=>{const t=i.a.createElement(I.c,{dangerouslySetInlineStyle:{__style:{zIndex:x.b}}},i.a.createElement(I.k,{anchor:A.current,idealDirection:"down",onDismiss:L,size:"xs"},i.a.createElement(y.a,null,!s&&"undefined"!=typeof window&&"windows"!==Object(C.b)(window)&&e&&i.a.createElement(f.a,{imgSrc:e||"",filename:w||g,category:h,pinId:b},e=>i.a.createElement(y.b,{onClick:e,text:a.a._("Download image","Button to download Pin image","Button to download Pin image")})),!s&&"undefined"!=typeof window&&"windows"===Object(C.b)(window)&&(e||E)&&i.a.createElement(S.a,{name:"web_eg_windows_download_image"},({anyEnabled:t})=>t&&i.a.createElement(_,{imgSrc:e||E||"",filename:w||g,category:h})),i.a.createElement(y.b,{onClick:u?T:p,text:a.a._("Report Pin","Label for report pin action","Label for report pin action")}),l&&i.a.createElement(S.a,{name:"closeup_pin_embed_code"},({anyEnabled:e})=>e&&i.a.createElement(y.b,{onClick:N,text:a.a._("Get Pin embed code","Label for embed pin action","Label for embed pin action")})))));return P?i.a.createElement(O.a,null,i.a.createElement(I.r,null,t)):t})(),j&&i.a.createElement(R,{myPin:{id:b,height:n.height,width:n.width},onDismiss:N}))})),j=n("YxyV"),D=n("7jH2");var A=e=>{const{pin:t,viewParameter:n}=e,{pinTitle:o,pinDescription:a,pinCategory:r}=Object(p.a)(t),s=Object(D.p)({pin:t}),{video:l}=Object(D.y)(s)||{},c=!!l;let h;t.images&&(h=t.embed&&"gif"===t.embed.type?t.embed.src:t.images["736x"]&&t.images["736x"].url);const f=!!t.story_pin_data_id,g=Object(j.d)(t),{isPromoted:y}=Object(m.a)(t),b=t.board.privacy===d.a.BoardPrivacy.SECRET,E=!y&&!b;return i.a.createElement(I.c,{"data-test-id":"pin-action-bar"},i.a.createElement(M,{embedImg:Object(j.e)(t,"736x"),showEmbed:E,bestPinImgSrc:g,bgColor:"transparent",hideDownload:c||f,iconColor:"gray",iconSize:"md",pinCategory:r,pinDescription:a,pinId:t.id,pinImgSrc:h,pinTitle:o,reportPin:Object(u.a)({pin:t,viewParameter:n,viewType:3}),usePortal:!1}))},L=n("c4Fo");const N=136;class H extends i.a.Component{constructor(...e){var t,n,o;super(...e),o={paused:!1,showPulsar:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o}componentDidMount(){this.mountPulsar(),this.props.onExperienceMount&&this.experience&&this.props.onExperienceMount(this.experience)}componentWillUnmount(){clearTimeout(this.timer)}mountPulsar(){if(!this.experience)return;const{display_data:e}=this.experience;e.has_pulsar&&this.setState({showPulsar:!0})}renderPulsar(){const{anchor:e}=this.props,{paused:t}=this.state;if(!e)return null;const n=e.getBoundingClientRect(),{height:o,width:a}=n,r=-(N/2+o/2),s=-(N/2-a/2);return i.a.createElement(I.c,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:1,marginTop:r,marginLeft:s,cursor:"pointer",pointerEvents:"none"}}},i.a.createElement(I.A,{paused:t}))}renderFlyout(e){const{anchor:t,flyoutSize:n,idealDirection:o,textOverflow:a}=this.props;return i.a.createElement(I.k,{anchor:t,color:"blue",idealDirection:o||"down",onDismiss:()=>{},shouldFocus:!1,showCaret:!0,size:n},i.a.createElement(I.c,{column:12,padding:3},i.a.createElement(I.K,{color:"white",overflow:a,weight:"bold"},e)))}render(){const{experienceIds:e,placementId:t,shouldTimeoutDismiss:n}=this.props,{showPulsar:o}=this.state;return i.a.createElement(L.a,{experienceIds:e,placementId:t,type:8},e=>{const{complete:t,dismiss:a,display_data:r}=e;return this.experience=e,r.has_pulsar||r.has_tooltip?(n&&r.disappearTime&&r.disappearTime>0&&(this.timer=setTimeout(()=>(a(),null),r.disappearTime)),i.a.createElement(I.c,{dangerouslySetInlineStyle:{__style:{zIndex:10}}},o&&this.renderPulsar(),r.has_tooltip&&(!r.has_pulsar||this.state.paused)&&this.renderFlyout(r.text))):(t(),null)})}}var Y=n("1Vso");const U=20,F={loaded:{opacity:1,transitionDuration:"0.20s",transitionTimingFunction:"cubic-bezier(0, 0, 0.58, 1)",transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"},fade:{opacity:.1,transitionDuration:"0.30s",transitionTimingFunction:"cubic-bezier(0, 0, 0.58, 1)",transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"}};function z({reactionLabel:e,handleHideConfirmation:t}){const[n,a]=Object(o.useState)("loaded"),r=Object(o.useRef)();return Object(o.useEffect)(()=>{let e=null,n=null;return r.current=requestAnimationFrame(()=>{e=setTimeout(()=>a("fade"),1e3),n=setTimeout(()=>t(),1300)}),function(){clearTimeout(e),clearTimeout(n)}},[]),i.a.createElement(I.c,{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},i.a.createElement(I.c,{rounding:"pill",position:"absolute",color:"darkGray",ref:r,height:U,display:"flex",alignItems:"center",justifyContent:"center",paddingY:1,paddingX:2,dangerouslySetInlineStyle:{__style:{...F[n],whiteSpace:"nowrap"}}},i.a.createElement(I.K,{color:"white",size:"sm",weight:"bold",overflow:"normal"},e)))}var G=n("i8i4"),q=n("eo+c");const W=300,X=80,$=-W/2,K=20,V=40,J=24,Q=-8,Z=9,ee={icon:{backgroundRepeat:"no-repeat",backgroundSize:"cover"},loading:{opacity:0,transitionDuration:"0.25s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1) translateZ(0) translateY(25px)",transformOrigin:"bottom"},loaded:{opacity:1,transitionDuration:"0.2s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1)",transformOrigin:"bottom"},clicked:{transition:"transform 0.2s ease-out",transform:`translateY(-30px) scaleX(${64/V}) scaleY(${64/V})`,transformOrigin:"bottom",position:"relative",zIndex:1},flying:{transition:"transform 0.2s ease-out",transformOrigin:"bottom"},label:{transition:"transform 0.2s ease-out",transform:`scale(${V/64})`,transformOrigin:"bottom",whiteSpace:"nowrap"},fading:{opacity:0,transition:"opacity 0.2s ease-out"}},te={boxShadow:"0 9px 26px rgba(0, 0, 0, 0.4)"};function ne({reactionButtonRect:e,handleReactionTrayClick:t}){const[n,a]=Object(o.useState)("loading"),[r,s]=Object(o.useState)(""),[l,c]=Object(o.useState)(),[d,u]=Object(o.useState)(!1),[m,p]=Object(o.useState)({}),[h]=Object(o.useState)(e),f=Object(o.useRef)(),g=Object(o.useRef)({});Object(o.useEffect)(()=>{"loading"===n&&(f.current=requestAnimationFrame(()=>a("loaded"))),(()=>{u(!0);const e={...m};q.c.forEach(t=>{const n=Object(G.findDOMNode)(g.current[t]);g.current[t]&&n instanceof HTMLElement&&!e[t]&&(e[t]=n.getBoundingClientRect())}),Object.keys(e).length===q.c.length&&p(e)})(),!l&&d&&(()=>{const e={...l};q.c.forEach(t=>{const n=m[t],{left:o,top:i}=h,{left:a,top:r}=n,s=o-a+Q,l=i-r+Z;e[t]={translateX:s,translateY:l}}),c(e)})()},[d,e]);const y=()=>{"clicked"===n&&r&&(a("flying"),setTimeout(()=>{t(r)},750))},b=q.c.map((e,t)=>{const{staticAsset:o,animatedAsset:a,label:s,htmlStyle:c,animationStyle:d}=Object(q.a)(e),u={transitionDelay:`${.08*t}s`,...ee[n]},m={...r===e?ee.clicked:ee.loaded},p={...l&&r===e?{transform:`translateZ(0) translateX(${l[e].translateX}px) translateY(${l[e].translateY}px) scaleX(${J/V}) scaleY(${J/V}) `,...ee[n]}:ee.fading};let h={};return"loading"===n||"loaded"===n?h={...u}:"clicked"===n?h={...m}:"flying"===n&&(h={...p}),i.a.createElement(I.c,{display:"flex",alignSelf:"center",justifyContent:"between",key:t},i.a.createElement(I.c,{maxHeight:V,maxWidth:V,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",dangerouslySetInlineStyle:{__style:{...h}},ref:t=>{g.current[e]=t}},r!==e&&i.a.createElement(I.c,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0},i.a.createElement(I.c,{width:V,height:V,dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${o})`,backgroundPosiiton:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}})),i.a.createElement(I.c,{display:"flex",alignItems:"center",justifyContent:"center",direction:"column",position:"relative"},i.a.createElement("style",{dangerouslySetInnerHTML:{__html:c}}),r===e&&"clicked"===n&&i.a.createElement(I.c,{rounding:"pill",color:"darkGray",height:K,dangerouslySetInlineStyle:{__style:ee.label},display:"flex",alignItems:"center",justifyContent:"center",paddingY:1,paddingX:2},i.a.createElement(I.K,{color:"white",size:"sm",weight:"bold",overflow:"normal"},s)),i.a.createElement("div",{onClick:y,onKeyDown:y,role:"presentation"},i.a.createElement(I.c,{width:V,height:V,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{...ee.icon,...r===e&&"clicked"===n?{animation:d}:{},backgroundImage:`url(${a})`}}})))))});return i.a.createElement(I.c,{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{marginLeft:$}}},i.a.createElement(I.c,{display:"flex",alignItems:"center",justifyContent:"center",width:W,height:X,rounding:"pill",color:"flying"===n?"transparent":"white",dangerouslySetInlineStyle:{__style:{..."flying"!==n?te:{}}},onMouseMove:e=>{const{clientX:t}=e;if("flying"!==n){const e=(e=>{let t;return d&&q.c.forEach(n=>{const o=m[n];if(o&&o.left&&o.right){const{left:i,right:a}=o;e>=i&&e<=a&&(t=n)}}),t||null})(t);e!==r&&s(e),a("clicked")}}},i.a.createElement(I.c,{display:"flex",alignItems:"center",justifyContent:"around",width:"100%",paddingX:5},b)))}var oe=n("eOdZ");function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ae=24,re=44,se={base:{borderRadius:"50%"},hovered:{backgroundColor:"rgb(226, 226, 226)"},active:{backgroundColor:"rgb(218, 218, 218)"},focused:{boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:0}},le=500,ce=300;var de=Object(h.connect)(null,e=>({pinUpdateReactionCount:(t,n,o)=>e(function(e,t,n){return{type:"PIN_UPDATE_REACTION_COUNT",payload:{id:e,increment:t,reactionType:n}}}(t,n,o))}))(class extends o.PureComponent{constructor(...e){super(...e),ie(this,"state",{clickedReaction:0,isConfirmationShowing:!1,isReactionTrayShowing:!1,reactionButtonRect:null,useInitialReaction:!0,isHoveringOverTray:!1,isHoveringOverButton:!1}),ie(this,"reactionButtonRef",i.a.createRef()),ie(this,"trayOpenTimer",null),ie(this,"trayCloseTimer",null),ie(this,"onResize",()=>{this.setReactionButtonRect(),this.startTrayCloseTimer()}),ie(this,"onScroll",()=>{this.setReactionButtonRect(),this.startTrayCloseTimer()}),ie(this,"handleExperienceMount",e=>{e&&e.complete&&(501977===e.experience_id||501995===e.experience_id)&&(this.tooltipExperience=e)}),ie(this,"handleReact",(e=7)=>{const{pinId:t,pinUpdateReactionCount:n}=this.props,o={pin_id:t,reaction_type:e};this.setState({clickedReaction:e,useInitialReaction:!1}),n(t,!0,e),oe.a.create("ReactionsResource",o).callUpdate()}),ie(this,"handleUnreact",()=>{const{pinId:e}=this.props,t={pin_id:e};this.setState({clickedReaction:0,useInitialReaction:!1}),oe.a.create("ReactionsResource",t).callDelete()}),ie(this,"setReactionButtonRect",()=>{if(this.reactionButtonRef.current&&this.reactionButtonRef.current instanceof HTMLElement){const e=this.reactionButtonRef.current.getBoundingClientRect();this.setState({reactionButtonRect:e})}}),ie(this,"closeTray",()=>{this.setState({isReactionTrayShowing:!1})}),ie(this,"startTrayCloseTimer",()=>{clearTimeout(this.trayCloseTimer),this.trayCloseTimer=setTimeout(()=>{const{isHoveringOverTray:e,isHoveringOverButton:t}=this.state;e||t||this.closeTray()},ce)}),ie(this,"handleOnHoverButton",()=>{this.setState({isHoveringOverButton:!0}),clearTimeout(this.trayOpenTimer),this.trayOpenTimer=setTimeout(()=>{const{isReactionTrayShowing:e,isHoveringOverButton:t}=this.state;!e&&t&&this.setState({isReactionTrayShowing:!0})},le),this.tooltipExperience&&this.tooltipExperience.complete()}),ie(this,"handleOffHoverButton",()=>{this.setState({isHoveringOverButton:!1}),this.startTrayCloseTimer()}),ie(this,"handleOnHoverTray",()=>{this.setState({isHoveringOverTray:!0})}),ie(this,"handleOffHoverTray",()=>{this.setState({isHoveringOverTray:!1}),this.startTrayCloseTimer()}),ie(this,"handleClickButton",()=>{const{clickedReaction:e,useInitialReaction:t}=this.state,{pinId:n,pinUpdateReactionCount:o,reactionByMe:i}=this.props,a=t?i:e;a?(o(n,!1,a),this.handleUnreact()):this.setReaction("love"),clearTimeout(this.trayOpenTimer),this.closeTray(),Object(k.a)(101,{view:3,viewParameter:139,element:11354,objectId:n})}),ie(this,"setReaction",e=>{this.handleReact(Object(q.a)(e).type),this.handleShowConfirmation()}),ie(this,"handleShowConfirmation",()=>{this.setState({isConfirmationShowing:!0})}),ie(this,"handleHideConfirmation",()=>{this.setState({isConfirmationShowing:!1},this.startTrayCloseTimer)})}componentDidMount(){this.setReactionButtonRect(),window.addEventListener("mouseover",this.setReactionButtonRect)}componentWillUnmount(){clearTimeout(this.trayOpenTimer),clearTimeout(this.trayCloseTimer),window.removeEventListener("mouseover",this.setReactionButtonRect)}render(){const{isReactionTrayShowing:e,reactionButtonRect:t,isConfirmationShowing:n,clickedReaction:o,useInitialReaction:a,isHoveringOverTray:r}=this.state,{reactionByMe:s,showTooltip:l}=this.props,c=a?s:o,d=c?q.b[c]:"default",{staticAsset:u,label:m}=Object(q.a)(d);return i.a.createElement(I.c,{position:"relative"},i.a.createElement(Y.a,{accessibilityLabel:"reaction",onClick:this.handleClickButton,onMouseEnter:this.handleOnHoverButton,onMouseLeave:this.handleOffHoverButton,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none",borderRadius:"50%"}},({active:e,hovered:t,focused:n})=>{let o={...se.base};return e?o={...se.base,...se.active}:t||r?o={...se.base,...se.hovered}:n&&(o={...se.base,...se.focused}),i.a.createElement(I.c,{color:"transparent",rounding:"circle",dangerouslySetInlineStyle:{__style:o}},i.a.createElement(I.c,{display:"flex",justifyContent:"center",alignItems:"center",dangerouslySetInlineStyle:{__style:{minHeight:re,minWidth:re}}},i.a.createElement(I.c,{height:ae,width:ae,ref:this.reactionButtonRef,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosiiton:"center",backgroundImage:`url(${u})`}}})))}),l&&!e&&!n&&a&&i.a.createElement(H,{experienceIds:[501977,501995],idealDirection:"down",placementId:12,anchor:this.reactionButtonRef.current,flyoutSize:"lg",onExperienceMount:this.handleExperienceMount}),e&&!!t&&!!t.left&&!!t.top&&i.a.createElement(I.c,{display:"flex",justifyContent:"center",alignItems:"center"},i.a.createElement(I.H,{top:0},i.a.createElement(I.P,{onMouseEnter:this.handleOnHoverTray,onMouseLeave:this.handleOffHoverTray},i.a.createElement(ne,{reactionButtonRect:t,handleReactionTrayClick:this.setReaction})))),n&&!!c&&m&&i.a.createElement(z,{reactionLabel:m,handleHideConfirmation:this.handleHideConfirmation}))}}),ue=n("rYoy"),me=n("zXAL"),pe=n("/zJj"),he=n("T5j3");function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"CloseupActionBar",(function(){return ye}));const ge=Object(o.lazy)(()=>n.e("SecondarySendButtonCommon").then(n.bind(null,"fepT")));class ye extends i.a.Component{constructor(e){super(e),fe(this,"sendExperienceComplete",()=>{}),fe(this,"handleExternalSend",()=>{this.sendExperienceComplete()}),fe(this,"onSendExperienceMount",e=>{e&&e.complete&&500946===e.experience_id&&(this.sendExperienceComplete=e.complete)}),fe(this,"promoteButtonRef",Object(o.createRef)()),this.sendButtonTooltipRef=i.a.createRef()}render(){const{editable:e,gridDescription:t,hideButtons:n,hidePromoteButton:o,imageSrc:a,isFlyoutOpen:r,isOnSecretBoard:s,onEditSubmit:l,onFlyoutDismiss:d,onToggleFlyout:u,pin:m,promoteButton:p,saveButton:h,shareButtonRef:f,viewParameter:g}=this.props,y=s?null:i.a.createElement(ue.a,null,i.a.createElement(I.c,null,i.a.createElement("div",{ref:this.sendButtonTooltipRef},i.a.createElement(ge,{buttonType:"icon",gridDescription:t,imageSrc:a,isFlyoutOpen:r,onExternalSend:this.handleExternalSend,onFlyoutDismiss:d,onToggleFlyout:u,pinId:m.id,sendType:"pin",shareButtonRef:f})),h&&!r&&i.a.createElement(H,{experienceIds:[500946],placementId:12,anchor:this.sendButtonTooltipRef.current,onExperienceMount:this.onSendExperienceMount}))),b=Object(he.c)(m),E=i.a.createElement(I.c,{display:"flex",color:"white",justifyContent:n?"end":"between",rounding:2,maxWidth:pe.d},!n&&i.a.createElement(I.c,{display:"flex"},e&&i.a.createElement(I.c,{marginEnd:1},i.a.createElement(c,{carouselSlotCurrentIndex:m&&m.carousel_data&&m.carousel_data.index,pinId:m.id,onSubmit:l,view:3,viewParameter:g})),i.a.createElement(A,{pin:m,viewParameter:g})),i.a.createElement(I.c,{alignItems:"center",display:"flex"},y,b&&i.a.createElement(ue.a,null,i.a.createElement(de,{pinId:m.id,reactionByMe:m.reaction_by_me,showTooltip:!0})),!o&&p&&i.a.createElement(ue.a,null,i.a.createElement(i.a.Fragment,null,i.a.createElement(I.c,{ref:this.promoteButtonRef},p),i.a.createElement(H,{experienceIds:[501121],idealDirection:"down",placementId:12,anchor:this.promoteButtonRef.current,flyoutSize:"lg"})))));return i.a.createElement(i.a.Fragment,null,i.a.createElement(I.c,{display:"flex",justifyContent:"between"},E,i.a.createElement(I.c,{marginStart:3},h)))}}t.default=Object(me.a)(ye)},tkfL:function(e,t,n){var o=n("3vRR");n.d(t,"a",(function(){return o.a}));var i=n("Pus6");n.d(t,"b",(function(){return i.a}))}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/CloseupActionBarCommon-7de063245a06ee7c7a47.mjs.map
